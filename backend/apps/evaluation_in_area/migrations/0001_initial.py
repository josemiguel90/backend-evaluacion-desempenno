# Generated by Django 3.2.2 on 2022-09-29 20:29

import datetime
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('payTime', '0002_rename_enddata_paytime_enddate'),
        ('charge', '0001_initial'),
        ('workers', '0006_alter_worker_operador'),
    ]

    operations = [
        migrations.CreateModel(
            name='EvaluationArea',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=80)),
                ('boss_charge', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='charge.charge')),
            ],
        ),
        migrations.CreateModel(
            name='EvaluationAspect',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=80)),
                ('bad_option', models.CharField(max_length=80)),
                ('regular_option', models.CharField(max_length=80)),
                ('good_option', models.CharField(max_length=80)),
                ('very_good_option', models.CharField(max_length=80)),
                ('type', models.IntegerField(choices=[('SELECT', 0), ('SALE_PLAN', 1), ('CHECK_LIST', 2)])),
                ('active', models.BooleanField()),
                ('area', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='aspects', to='evaluation_in_area.evaluationarea')),
            ],
        ),
        migrations.CreateModel(
            name='MeliaAspect',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=80)),
            ],
        ),
        migrations.CreateModel(
            name='MeliaMonthEvaluationAspectValue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assigned_value', models.IntegerField(validators=[django.core.validators.MinValueValidator(2), django.core.validators.MaxValueValidator(5)])),
                ('melia_aspect', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='evaluation_in_area.meliaaspect')),
            ],
        ),
        migrations.CreateModel(
            name='MonthEvaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(default=datetime.date.today)),
            ],
        ),
        migrations.CreateModel(
            name='MeliaMonthEvaluationObservation',
            fields=[
                ('id', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, primary_key=True, related_name='melia_observation', serialize=False, to='evaluation_in_area.monthevaluation')),
                ('observations', models.CharField(max_length=300, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='MonthEvaluationAspectValue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('assigned_value', models.IntegerField(validators=[django.core.validators.MinValueValidator(2), django.core.validators.MaxValueValidator(5)])),
                ('aspect', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='evaluation_in_area.evaluationaspect')),
                ('month_evaluation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='evaluation_in_area.monthevaluation')),
            ],
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='evaluated_aspect',
            field=models.ManyToManyField(through='evaluation_in_area.MonthEvaluationAspectValue', to='evaluation_in_area.EvaluationAspect'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='evaluated_melia_aspect',
            field=models.ManyToManyField(through='evaluation_in_area.MeliaMonthEvaluationAspectValue', to='evaluation_in_area.MeliaAspect'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='evaluation_area',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='evaluation_in_area.evaluationarea'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='evaluator',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='+', to='workers.worker'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='evaluator_charge',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='+', to='charge.charge'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='payment_period',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='payTime.paytime'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='worker',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='+', to='workers.worker'),
        ),
        migrations.AddField(
            model_name='monthevaluation',
            name='worker_charge',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='+', to='charge.charge'),
        ),
        migrations.AddField(
            model_name='meliamonthevaluationaspectvalue',
            name='month_evaluation',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='melia_aspects', to='evaluation_in_area.monthevaluation'),
        ),
        migrations.AddField(
            model_name='evaluationaspect',
            name='related_melia_aspect',
            field=models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, related_name='evaluations_aspects', to='evaluation_in_area.meliaaspect'),
        ),
        migrations.AddConstraint(
            model_name='monthevaluationaspectvalue',
            constraint=models.UniqueConstraint(fields=('month_evaluation', 'aspect'), name='unique_evaluated_aspect'),
        ),
        migrations.AddConstraint(
            model_name='monthevaluation',
            constraint=models.UniqueConstraint(fields=('evaluation_area', 'date', 'worker', 'evaluator', 'payment_period'), name='unique_month_evaluation'),
        ),
        migrations.AddConstraint(
            model_name='meliamonthevaluationaspectvalue',
            constraint=models.UniqueConstraint(fields=('month_evaluation', 'melia_aspect'), name='unique_melia_evaluation_aspect_value'),
        ),
    ]
